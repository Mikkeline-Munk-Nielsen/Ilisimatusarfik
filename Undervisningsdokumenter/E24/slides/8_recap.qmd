---
format: 
  revealjs:
    theme: css_etc/custom-theme-ilisimatusarfik.css
    slide-level: 0  # Disable automatic slide creation from headings
    incremental: false 
    logo: css_etc/ilisimatusarfik.png
    highlight-style: github-dark
editor: visual
---

::: center
# Recap

### Statistik E24 (15 ECTS)

### ved Mikkeline Munk Nielsen
:::

------------------------------------------------------------------------

## Hvad skal vi bruge statistik til?

-   Skabe overblik over tendenser

-   Finde m√∏nstre

-   Unders√∏ge sammenh√¶nge og forskellighed

-   Teste teorier

-   Udvikle forklaringer og forudsigelser ![](images/business_economy.png){.right-align-image width="600px"}

------------------------------------------------------------------------

## Fokusomr√•der

Sidste semester:

-   Stikpr√∏ve teori

-   Grundl√¶ggende statistik (m√•leniveauer, centrum- og spredningsm√•l)

-   Hypotesetest

-   Beskrivende statistik (uni- og bivariat)

Dette semester

-   Fokus p√• inferens

-   Forklarende statistik

-   Line√¶r regression

------------------------------------------------------------------------

# Stikpr√∏ver

En stikpr√∏ve er en lille del af universet, der udv√¶lges til at repr√¶sentere/beskrive hele universet ![](images/udtraek.png)

------------------------------------------------------------------------

# Stikpr√∏veudtr√¶k og statistisk usikkerhed

-   P√• baggrund af en stikpr√∏ve drages konklusioner om en population (inferens). Slutningen er baseret p√• stikpr√∏vens **repr√¶sentativitet**

-   Den bedste m√•de at opn√• repr√¶sentativitet p√• er at anvende en udv√¶lgelsesmekanisme baseret p√• **tilf√¶ldighed!**

**Hvorfor virker tilf√¶ldigt udtr√¶k ift. at sikre en repr√¶sentativ stikpr√∏ve?**

-   Hver enhed i populationen har samme sandsynlighed for at blive udvalgt (undg√•r systematisk bias/sk√¶vvridning)
-   Sikrer, at stikpr√∏ven i *gennemsnit* er repr√¶sentativ for populationen.
-   Tilf√¶ldighed i stikpr√∏veudtr√¶k bygger p√• principper om lige sandsynlighed, store tals lov og den centrale gr√¶nsev√¶rdis√¶tning.

------------------------------------------------------------------------

# Stikpr√∏veudtr√¶k og statistisk usikkerhed

-   Vi bruger stikpr√∏ver som udgangspunkt for at udtale os om en population!

-   Vi kan m√•ske ikke udregne gennemsnitsindkomsten for HELE populationen $(\mu)$ men vi kan udregne et stikpr√∏vegennemsnit $(\bar{x})$

-   Fordi en stikpr√∏ve ikke svarer pr√¶cist den population, som den er trukket fra, vil der altid v√¶re en ***statistisk usikkerhed*** forbundet med en generalisering fra stikpr√∏ve til population (ogs√• kaldet margin of error).

------------------------------------------------------------------------

# Inferens

<br>

-   Statistik handler bl.a. om at sige noget under usikkerhed og om at vurdere, hvor stor usikkerheden p√• ens udsagn er.

-   Den del af statistikken, hvor vi bruger stikpr√∏ver til at udtale os om populationer, kaldes **inferentiel statistik!**

-   Her bruges **inferenceskriterier** som regler til at afg√∏re, om resultaterne fra en stikpr√∏ve er overbevisende nok til at kunne overf√∏res til hele populationen. De hj√¶lper med at vurdere, om de m√∏nstre, man ser, er reelle eller bare skyldes tilf√¶ldigheder

*I kender dem i praksis som p-v√¶rdier...*

------------------------------------------------------------------------

# Hvorfor hypotese-tests er vigtige...

-   Vi bruger hypotesetest til at evaluere hypoteser/p√•stande om en population **baseret p√• stikpr√∏vedata**

-   Eksempel p√• hypotese: der er forskel p√• gennemsnitsl√∏nnen for m√¶nd og kvinder i Gr√∏nland

-   Form√•l: At tr√¶ffe beslutninger om, hvorvidt der er tilstr√¶kkeligt bevis for at afvise hypotesen med udgangspunkt i stikpr√∏ven

-   Konkret bruger vi dem til at vurdere, om forskelle og observationer vi ser i vores stikpr√∏ve er tilf√¶lde pga. stikpr√∏veusikkerhed, eller om det er sandsynligt, at de er udtryk for rigtige forskelle i populationen

------------------------------------------------------------------------

# Fremgangsm√•de

I hypotesetests stiller man to hypoteser op og tester dem mod hinanden:

-   ***Nulhypotese (H0)***: En p√•stand om, at der ikke er nogen signifikant forskel eller virkning.

-   ***Alternativ hypotese (H1)***: En p√•stand om, at der er en signifikant forskel eller virkning.

[Eksempel]{.underline}:

**H0**: Der er [ikke]{.underline} nogenforskel i gennemsnitsl√∏nnen for m√¶nd og kvinder

**H1**: Der [er]{.underline} forskel i gennemsnitsl√∏nnen for m√¶nd og kvinder

------------------------------------------------------------------------

# Fremgangsm√•de

1.  **Formulering af hypoteser:** Formulering af nulhypotese og alternativ hypotese
2.  **Valg af signifikansniveau:** Fastl√¶ggelse af den sandsynlighed vi har defineret i konfidensintervallet som den acceptable usikkerhed (standard $0,05 = 5\%$)
3.  **Beregning af teststatistik**: Anvendelse af passende statistisk test til at beregne teststatistikken baseret p√• stikpr√∏vedataene (dette g√∏r R for jer)
4.  **Afg√∏relse**: Sammenligning af teststatistikken med en kritisk v√¶rdi eller p-v√¶rdi for at afg√∏re, om man skal afvise nulhypotesen.

------------------------------------------------------------------------

# Statistisk signifikans

-   Signifikans er et ultra-vigtigt begreb i hypotesetests, og relaterer sig tilbage til statistisk usikkerhed.

-   F√∏r en hypotesetest fasts√¶ttes det acceptable niveau af statistisk usikkerhed, nemlig sandsynligheden for at afvise nulhypotesen, hvis den er sand (type I fejl).

-   Man arbejder typisk med ùõº=0,05 dvs. 5 % sandsynlighed for at beg√• type I fejl

------------------------------------------------------------------------

# Fortolkning af statistisk signifikans

**√òvelse 10 min:**

I t-testen for bivariat analyse har I l√¶rt at teste, om der er forskel p√• et gennemsnit for to grupper (f.eks. om gennemsnitsindkomsten er forskellig blandt m√¶nd og kvinder).

-   Hvis t-testen returnerer en p-v√¶rdi p√• under 0,05 afvises nulhypotesen om, at der ingen forskel er p√• gennemsnitsindkomsten.

-   I dette tilf√¶lde konkluderer man, at der er en ***statistisk signifikan**t forskel* p√• gennemsnitsindkomsten for m√¶nd og kvinder. Men hvad betyder det, egentlig?

------------------------------------------------------------------------

# Fortolkning af statistisk signifikans

<br>

Statistisk signifikant betyder, at vi - *med det acceptable niveau af usikkerhed, som vi har fastlagt f√∏r testen (typisk 0,05 = 5 %)* - kan konkludere, at den forskel vi har estimeret med udgangspunkt i stikpr√∏ven ogs√• er tilstede i populationen.

<br>

Hvordan? Vi udregner med udgangspunkt i stikpr√∏ven, at det er tilstr√¶kkeligt usandsynligt at tr√¶kke en stikpr√∏ve med denne forskel, hvis den ikke faktisk findes i populationen.

------------------------------------------------------------------------

# P-v√¶rdier og signifikans i praksis...

-   I praksis sammenlignes $p$ -v√¶rdien med signifikansniveauet $\alpha$ (fx $0,05$):

    -   Hvis $p < \alpha$, afvises H0 (statistisk signifikant).

    -   Hvis $p \geq \alpha$, kan H0 ikke afvises (ikke statistisk signifikant)

<br>

-   Hvis vores signifikansniveau er sat til $5%$% afviser vi nulhypotesen, hvis vores $p<0,05$.

-   Hvis $p‚â•0,05$ kan vi ikke afvise nulhypotesen. Dette er ikke det samme som, at nulhypotesen er sand! Vi kan bare ikke afvise den med udgangspunkt i den p√•g√¶ldende stikpr√∏ve.

------------------------------------------------------------------------

# P-v√¶rdier og signifikans i praksis...

<br>

**√òvelse 2 min**

Det er standard af fastl√¶gge et signifikansniveau p√• 5 % ($\alpha=0,05$), men det er s√•dan set arbitr√¶rt. I nogle discpliner arbejder man med $\alpha=0,1$. Diskut√©r, hvad dette betyder for fortolkningen af resultatet af en hypotesetest.

------------------------------------------------------------------------

# Hypotese-tests i sidste semester

Sidste semester arbejdede vi med fire hypotesetests:

-   t-test for et gennemsnit mod en forventet v√¶rdi (univariat)

-   t-test for et gennemsnit mellem to grupper (bivariat)

-   $\chi^2$ test mod en forventet fordeling

-   $\chi^2$ test for uafh√¶ngighed

<br>

**√òvelse 15 min**: Diskut√©r hvad hver test bruges til i praksis. Hvad kan de hj√¶lpe os med at svare p√•?

------------------------------------------------------------------------

# Variable og skalaer

<br>

Variable inddeles f√∏rst i to typer baseret p√• deres skala:

-   **Diskrete variable**: kan antage et endeligt antal v√¶rdier

-   **Kontinuerte variable**: kan antage uendeligt mange v√¶rdier inden for en given range

<br>

**4 min. √∏velse**: kom med eksempler p√• hhv. diskrete og kontinuerte variable

------------------------------------------------------------------------

# Variable og skalaer

<br>

Variable inddeles f√∏rst i to typer baseret p√• deres skala:

-   **Diskrete variable**: kan antage et endeligt antal v√¶rdier, f.eks. antal varer solgt i en butik. (t√¶llevariable)

-   **Kontinuerte variable**: kan antage uendeligt mange v√¶rdier inden for en given range, f.eks. pris

------------------------------------------------------------------------

# Variable og skalaer

::::: two-column-layout
::: left-column
Dern√¶st kategoriseres variable i ***m√•leniveauer***, afh√¶ngigt af hvilken skala vi m√•ler variablen p√•. M√•leniveauer beskriver, hvordan data kan klassificeres og behandles i statistiske analyser. De angiver:
:::

::: right-column
![](images/m√•leniveauer.png)
:::
:::::

------------------------------------------------------------------------

# Variable og skalaer

::::: columns
::: {.column width="50%"}
-   Vi f√•r mere information og flere muligheder, n√•r vi g√•r op i m√•leniveau.
-   Man kan altid g√• ned, ved at omkode sine variable (f.eks. alder til alderskategorier eller indkomst til indkomstkvartiler), men man kan ikke g√• op.
-   Bin√¶re/dikotome variable, der enten kan tage v√¶rdien 0 eller 1 er s√¶rlige og kan behandles som alle m√•leniveauer.
:::

::: {.column width="50%"}
![](images/m√•leniveauer.png)
:::
:::::

------------------------------------------------------------------------

# Variable og skalaer

::::: columns
::: {.column width="50%"}
**√òvelse 5 minutter**: diskut√©r hvad der karakteriserer hvert m√•leniveau og giv eksempler p√• variable for hvert m√•leniveau
:::

::: {.column width="50%"}
![](images/clipboard-450512089.png)
:::
:::::

------------------------------------------------------------------------

```{r include=F}
library(tidyverse)
df_ESS <- readRDS("Data/ESS.rds") 
```

# Variable i R

Variablene i R har en *type*, vist i skr√• parenteser `<>` efter variabelnavnet. Typerne p√•virker hvad funktionerne g√∏r med variablen - og det h√¶nger faktisk sammen med variablens m√•leniveau!

```{r echo=T}
glimpse(df_ESS)
```

------------------------------------------------------------------------

# Variable i R

| Type | Forklaring | Eks. | M√•leniveau |
|------------|-------------------------------|------------------|------------|
| **Numeric** | Numeriske v√¶rdier, b√•de heltal og decimaltal. | `3`, `42.5`, `-7`, `0.001` | Interval |
| **Integer** | Heltal (underkategori af numeric) | `1L`, `100L`, `-50L` | Interval |
| **Character** | Tekst eller strenge | `"Hello world"`, | Nominal |
| **Factor** | Kategoriske data med faste niveauer | `"Mand", "Kvinde"` | Nominal eller Ordinal (\<ord\>) |
| **Boolean** | Boolean values (sand/falsk). | `TRUE`, `FALSE` | Nominal |

------------------------------------------------------------------------

# M√∏d `groupby()` og `summarise()`

-   `group_by()` bruges til at gruppere data efter √©n eller flere variabler.

-   Det skaber **grupper** i datas√¶ttet, som derefter kan opsummeres eller manipuleres separat.

-   N√•r dine data er grupperet, kan du bruge `summarise()` til at beregne opsummeringer for hver gruppe.

-   Eksempler p√• opsummeringer: gennemsnit, median, sum eller brugerdefinerede beregninger.

------------------------------------------------------------------------

# M√∏d `groupby()` og `summarise()`

Datas√¶t f√∏r groupby():

```{r echo=T, warning=F, message=F}
head(df_ESS)
```

------------------------------------------------------------------------

# M√∏d `groupby()` og `summarise()`

Vi kan nu bruge `groupby()` til at gruppere uddannelsesniveau og derefter `summarise()` til at beregne antal respondenter i og gennemsnitsindkomsten for hver gruppe:

```{r echo=T, warning=F, message=F}
df_ESS %>% group_by(udd) %>% 
  summarise(Gennemsnitsindkomst = mean(net_indkomst, na.rm = TRUE),
            N = n())
```

------------------------------------------------------------------------

# √òvelse i data wrangling

<br>

"√òvelse i BNP" ligger p√• hjemmesiden.
