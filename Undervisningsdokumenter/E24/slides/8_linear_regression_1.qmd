---
format: 
  revealjs:
    theme: css_etc/custom-theme-ilisimatusarfik.css
    slide-level: 0  # Disable automatic slide creation from headings
    incremental: false 
    logo: css_etc/ilisimatusarfik.png
editor: visual
---

::: center
# LineÃ¦r regression 1

### Statistik E24 (15 ECTS)

### ved Mikkeline Munk Nielsen
:::

------------------------------------------------------------------------

## Introduktion til lineÃ¦r regressionsanalyse

-   

------------------------------------------------------------------------

## Fra uni- til bi- til multivariat

<br>

**Univariat analyse**: analyser af fordelingen pÃ¥ Ã©n variabel

**Bivariat analyse**: analyse af sammenhÃ¦ngen mellem to variable

**Multivariat analyse**: analyser af sammenhÃ¦nge mellem to eller flere variable

<br>

LineÃ¦r regression hÃ¸rer under multivariat analyse.

------------------------------------------------------------------------

## Hvorfor lineÃ¦r regression?

Vi har en hypotese om, at der er en sammenhÃ¦ng mellem indkomst og uddannelse. Vi har ogsÃ¥ en hypotese om retningen pÃ¥ denne sammenhÃ¦ng: des flere Ã¥rs uddannelse du har, desto mere tjener du:

::: center
<img src="images/reg1.png" width="743"/>
:::

------------------------------------------------------------------------

## Hvorfor lineÃ¦r regression?

Vi har en hypotese om, at der er en sammenhÃ¦ng mellem indkomst og uddannelse. Vi har ogsÃ¥ en hypotese om retningen pÃ¥ denne sammenhÃ¦ng: des flere Ã¥rs uddannelse du har, desto mere tjener du:

::: center
![](images/reg2.png){width="743"}
:::

<br>

Men hvad hvis en del af indkomstforskelle mellem hÃ¸jt/lavere uddannede skyldes, at dem der har lange uddannelser er Ã¦ldre og dermed har mere erfaring og anciennitet pÃ¥ arbejdsmarkedet?

------------------------------------------------------------------------

## Hvorfor lineÃ¦r regression?

Hvis alder korrelerer med bÃ¥de antal Ã¥rs uddannelse og indkomst, er alder en "confounding variable."

::: center
![](images/reg2.png){width="743"}
:::

Det betyder, at en del af forskellen i indkomst mellem folk hÃ¸j/lavere uddannelse skyldes forskelle i alder

Hvis vi ikke tager hÃ¸jde for, at noget af forskellen skyldes forskelle i alder, vil vi komme til at overvurdere (eller i andre tilfÃ¦lde undervurdere) sammenhÃ¦ngen mellem uddannelse og indkomst!

------------------------------------------------------------------------

## Hvorfor lineÃ¦r regression?

-   LineÃ¦r regression kan bruges til at undersÃ¸ge sammenhÃ¦nge mellem to variable, samtidig med at vi tager hÃ¸jde for andre variable!

-   Der findes andre typer af regressionsanalyse, sÃ¥ hvorfor skal vi lÃ¦re lineÃ¦r?

    -   Det er den mest anvendte

    -   Metoden er sindssygt robust og kan anvendes til mange forskellige spÃ¸rgsmÃ¥l

    -   Det er et godt udgangspunkt for at lÃ¦re mere avanceret statistik.

------------------------------------------------------------------------

## Variable i lineÃ¦r regression

-   I lineÃ¦r regressionsanalyse er vi typisk interesserede i at undersÃ¸ge sammenhÃ¦ngen mellem to variable, f.eks. uddannelse og indkomst

-   Disse to variable hedder henholdsvis den afhÃ¦ngige og uafhÃ¦ngige variabel

-   Den afhÃ¦ngige variabel er den, som vi pÃ¥tÃ¦nker pÃ¥virkes (â€afhÃ¦ngerâ€) af den uafhÃ¦ngige:

::: center
![](images/reg3.png){width="743"}
:::

------------------------------------------------------------------------

## Variable i lineÃ¦r regression

-   Vores spÃ¸rgsmÃ¥l er i udgangspunktet, betyder uddannelse noget for vores indkomstniveau?
-   Men med lineÃ¦r regression kan vi ogsÃ¥ spÃ¸rge: hvor stor er forskellen i indkomst mellem hÃ¸jt/lavere uddannede personer, nÃ¥r vi samtidig tager hÃ¸jde for forskelle i alder?
-   Her inddrager vi en tredje variabel, en ***kontrolvariabel***, der kontrollerer for denne tredje faktor

::: center
![](images/reg4.png){width="743"}
:::

------------------------------------------------------------------------

## Variable i lineÃ¦r regression

-   Vi kan faktisk inkludere mange kontrolvariable i vores regressionsanalyse pÃ¥ en gang
-   Dermed kan vi undersÃ¸ge, om sammenhÃ¦ngen mellem uddannelse og indkomst bestÃ¥r, selv nÃ¥r vi har kontrolleret for andre faktorer, som kunne tÃ¦nkes at forklare den forskel vi ser

<br>

::: center
![](images/reg5.png){width="743"}
:::

------------------------------------------------------------------------

## LineÃ¦r regressionsanalyse kan anvendes...

<br>

-   Deskriptivt/beskrivende til at beskrive sammenhÃ¦nge mellem variable

-   Forklarende ved at teste, om sammenhÃ¦nge mellem to variable bestÃ¥r, nÃ¥r der tages hÃ¸jde for andre faktorer samtidig

-   Forudsigende pÃ¥ baggrund af data og model

------------------------------------------------------------------------

## Eksempel

<br>

Lad os prÃ¸ve at tage gennemgÃ¥, hvordan en lineÃ¦r regressionsmodel skrives op og fortolkes med eksemplet fra Karlson (2017) teksten om lineÃ¦r regression i Survey bogen...

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

Simpel lineÃ¦r regression betragter vi kun sammenhÃ¦ngen mellem en afhÃ¦ngig variabel $Y$ og en uafhÃ¦ngig variabel $X$

\
$Y=\alpha + \beta X+\epsilon$

<br>

Denne model er simpel, fordi der kun er Ã©n variabel pÃ¥ hÃ¸jde side af lighedstegnet. I eksemplet med indkomst og uddannelse skrives det sÃ¥ledes:

<br>

$Indkomst = \alpha+\beta uddannelse+\epsilon$

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

Modellen har to parametre, $\alpha$ (alpha) og $\beta$ (beta)\
<br>

$Indkomst = \alpha+\beta uddannelse+\epsilon$

<br>

-   $\alpha$ kaldes konstantleddet og fortolkes som den gennemsnitlige vÃ¦rdi af $Y$ (indkomst) nÃ¥r $X$ (uddannelse) er lig med 0.

-   Hvis man kan have mellem 0 og 20 Ã¥rs uddannelse, vil ğ›¼ reprÃ¦sentere den gennemsnitlige indkomst for dem, der har 0 Ã¥rs uddannelse.

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

Modellen har to parametre, $\alpha$ (alpha) og $\beta$ (beta)\
<br>

$Indkomst = \alpha+\beta uddannelse+\epsilon$

<br>

-   $\beta$ kaldes hÃ¦ldningskoefficienten og fortolkes som den gennemsnitlige Ã¦ndring i Y (indkomst), for Ã©n enhedsÃ¦ndring i (X) uddannelse.

-   $\beta$ reprÃ¦senterer i dette eksempel den forventede/gennemsnitlige Ã¦ndring i indkomst, nÃ¥r man fÃ¥r Ã©t Ã¥rs uddannelse mere.

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

Det sidste tegn $\epsilon$ (epsilon) er fejlleddet eller residualet:

<br>

$Indkomst = \alpha+\beta uddannelse+\epsilon$

<br>

-   Fejlleddet er en variabel (ikke et parameter), som indeholder hver respondents afvigelse mellem respondenternes observerede indkomst og den indkomst, som regressionsmodellen forudsiger, at respondenten har, pÃ¥ baggrund af ğ›¼ og ğ›½.

-   $\epsilon$ opsummerer med andre ord den variation i Y (indkomst), som ikke kan forklares af X (uddannelse).

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

::::: two-column-layout
::: left-column
![](images/reg6.png)
:::

::: right-column
-   Parametre og fejlled kan fremstilles grafisk

-   Pointen med lineÃ¦r regression er at lÃ¦gge en lige linje gennem alle respondenters koordinater

-   Linjen estimeres sÃ¥ledes, at der er mindst mulig afstand til hver af datapunkterne

-   Denne afstand opfanges af $\epsilon$
:::
:::::

------------------------------------------------------------------------

## Simpel lineÃ¦r regression

::::: two-column-layout
::: left-column
![](images/reg6.png)
:::

::: right-column
-   $\beta$ er hÃ¦ldningen pÃ¥ linjen, netop derfor kaldes den for hÃ¦ldningskoefficienten

-   $\beta$ reprÃ¦senterer stigningen pÃ¥ Y-aksen, nÃ¥r ğ‘‹ stiger med 1

-   Stigningen aflÃ¦ses altsÃ¥ pÃ¥ y-aksen
:::
:::::

------------------------------------------------------------------------

## Eks

<br>

Lad os prÃ¸ve at tage gennemgÃ¥, hvordan en lineÃ¦r regressionsmodel skrives op og fortolkes med eksemplet fra Karlson (2017) teksten om lineÃ¦r regression i Survey bogen...

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

I den simple lineÃ¦re regression er $\beta$-koefficienten udtryk for en ubetinget eller â€ikke-kontrolleretâ€ lineÃ¦r sammenhÃ¦ng mellem $X$ og $Y$

<br>

$Indkomst = \alpha+\beta uddannelse+\epsilon$

<br>

I multipel lineÃ¦r regression introducerer vi en tredje variabel $Z$, som placeres pÃ¥ hÃ¸jre side af lighedstegnet:

$Indkomst = \alpha+\beta uddannelse+\delta Z+\epsilon$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

$Indkomst = \alpha+\beta uddannelse+\delta Z+\epsilon$

<br>

-   Konstantleddet $\alpha$ fortolkes nu som den gennemsnitlige vÃ¦rdi af $Y$ nÃ¥r bÃ¥de $X$ og $Z$ er lig med 0 <br>
-   Fejlledet $\epsilon$ fortolkes som den del af variationen i $Y$ som ikke kan forklares af bÃ¥de $ğ‘‹$ og $ğ‘$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

-   I simpel lineÃ¦r regression er $\beta$ en â€ubetingetâ€ lineÃ¦r sammenhÃ¦ng mellem $ğ‘‹$ og $Y$:

$Y = \alpha+\beta X+\epsilon$

-   Men i den multiple regressionsmodel er $\beta$ den â€betingede/partielleâ€ sammenhÃ¦ng mellem $ğ‘‹$ og $Y$ nÃ¥r vi kontrollerer for $ğ‘$

$Y = \alpha+\beta X+\delta Z+\epsilon$

-   At â€kontrollere for $ğ‘$â€ betyder, at vi kun sammenligner folk, men samme vÃ¦rdi pÃ¥ variablen $ğ‘$.

-   Her er $\beta$ altsÃ¥ den forventede Ã¦ndring i $Y$ for en enhedsÃ¦ndring i $ğ‘‹$, nÃ¥r man sammenligner folk, men samme vÃ¦rdi pÃ¥ $ğ‘$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

Delta ğ›¿ fortolkes ligesom $\beta$

$Y = \alpha+\beta X+\delta Z+\epsilon$

<br>

-   Koefficienten $\delta$ er bare den â€betingede/partielleâ€ sammenhÃ¦ng mellem $Z$ og $Y$ nÃ¥r vi kontrollerer for $X$

-   At â€kontrollere for $X$â€ betyder, at vi kun sammenligner folk, men samme vÃ¦rdi pÃ¥ variablen $X$.

-   Her er $\delta$ altsÃ¥ den forventede Ã¦ndring i $Y$ for en enhedsÃ¦ndring i $Z$, nÃ¥r man sammenligner folk, men samme vÃ¦rdi pÃ¥ $X$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

Lad os sige, at:

-   $Y$ mÃ¥ler indkomst i DKK

-   $X$ mÃ¥ler uddannelse i Ã¥r

-   $Z$ mÃ¥ler din alder

$Indkomst = \alpha+\beta uddannelse+\delta alder+\epsilon$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

$Indkomst = \alpha+\beta uddannelse+\delta alder+\epsilon$

<br>

SÃ¥ vil:

-   $\alpha$ vÃ¦re den gennemsnitlige indkomst for en person med 0 Ã¥rs uddannelse og en alder pÃ¥ 0 Ã¥r

-   $\beta$ vÃ¦re den forventede Ã¦ndring i indkomst, hver gang uddannelse stiger med 1 (Ã¥r), nÃ¥r vi sÃ¸rger for kun at sammenligne folk der er lige gamle, og dermed tager hÃ¸jde for effekten af alder

-   $\delta$ vÃ¦re den forventede Ã¦ndring i indkomst, hver gang alder stiger med 1 (Ã¥r), nÃ¥r vi kontrollerer for uddannelse

-   $\epsilon$ vÃ¦re den del af variationen i ğ‘Œ som ikke kan forklares af bÃ¥de $X$ og $X$

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

I dette eksempel vil variablene have fÃ¸lgende roller:

<br>

![](images/reg7.png){fig-align="center" width="515"}

<br>

-   Variable er dem vi specificerer i vores regression i R

-   Koefficienterne er de tal, som vi aflÃ¦ser som resultater

------------------------------------------------------------------------

## Multipel lineÃ¦r regression

-   Pointen med at indfÃ¸re kontrolvariable er, at vi kan fÃ¥ den â€reneâ€ sammenhÃ¦ng mellem to variable (f.eks. Uddannelse og indkomst), renset for effekten af confounding variables (sÃ¥som alder)

<br>

![](images/reg8.png){fig-align="center"}

<br>

-   AltsÃ¥ kan vi teste, om der faktisk ser ud til at vÃ¦re en sammenhÃ¦ng mellem uddannelse og indkomst, som ikke skyldes andre ting (sÃ¥ lÃ¦nge vi kan mÃ¥le dem og inkludere dem som kontrolvariable).

---

## Multipel lineÃ¦r regression

NÃ¥r vi tester, om der er en sammenhÃ¦ng mellem ğ‘‹ og ğ‘Œ i lineÃ¦r regression, laver vi faktisk bare en t-test pÃ¥ den tilhÃ¸rende koefficient ğ›½:

<br>

H0: ğ›½ (hÃ¦ldningen) er lig med 0

H1: ğ›½ (hÃ¦ldningen) er ikke lig med nul

<br>

-   Vi bruger som altid p-vÃ¦rdien til at afgÃ¸re, om vi kan forkaste nulhypotesen! Hvis p-vÃ¦rdien er under 0,05 siger vi, at der er en statistisk signifikant sammenhÃ¦ng mellem ğ‘‹ og ğ‘Œ (selv nÃ¥r vi kontrollerer for ğ‘).

-   Vi laver i princippet prÃ¦cis samme test for ğ›¿, for at teste, om der er en statistisk signifikant sammenhÃ¦ng mellem ğ‘ og ğ‘Œ (selv nÃ¥r vi kontrollerer for ğ‘‹).
